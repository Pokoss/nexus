import{W as ie,r as l,j as s,y as B}from"./app-G6v-BuNp.js";import{X as oe}from"./index.es-CJmrmEU2.js";import{r as t}from"./index-rCyCOgzL.js";import{S as c}from"./react-select.esm-DSU7ihcM.js";import ce from"./Layout-CZU1jjyA.js";import"./Sidebar-DC-RKys0.js";import"./Header-Nuv6qW9c.js";import"./UserMenu-Bn3H8czA.js";function ue({villages:i,districts:O}){const{data:n,setData:r,processing:de,post:A,reset:I,errors:he}=ie(),[d,V]=l.useState(""),[me,h]=l.useState(1);console.log(i);const H=e=>{B.get("/dashboard/accounting/expenses",{page:e,search:d},{preserveState:!0})},R=e=>{h(e),H(e)},T=e=>{e.preventDefault(),V(e.target.value),h(1);var a=e.target.value;B.get("/dashboard//hr/employee",{search:a,page:1},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{}})},[$,m]=l.useState([]),[g,p]=l.useState(!1),[x,b]=l.useState(!1),[y,v]=l.useState(!1);l.useState(null);const[M,j]=l.useState([]),[W,S]=l.useState([]),f=O.map(e=>({value:e.id,label:e.district})),C=$.map(e=>({value:e.id,label:e.county})),w=M.map(e=>({value:e.id,label:e.subcounty})),D=W.map(e=>({value:e.id,label:e.parish})),X=async e=>{p(!0);try{const a=await axios.get(`/getcounties?district=${e}`);console.log("API Data:",a.data),m(a.data)}catch(a){console.error("Error:",a),m([])}finally{p(!1)}},U=async e=>{b(!0);try{const a=await axios.get(`/getsubcounties?subcounty=${e}`);console.log("API Data:",a.data),j(a.data)}catch(a){console.error("Error:",a),j([])}finally{b(!1)}},Z=async e=>{v(!0);try{const a=await axios.get(`/getparishes?parish=${e}`);console.log("API Data:",a.data),S(a.data)}catch(a){console.error("Error:",a),S([])}finally{v(!1)}},q=async e=>{e.preventDefault(),A("/dashboard/village/post",{preserveScroll:!0,preserveState:!0,onSuccess:()=>{I(),r({}),o()}})},[N,G]=l.useState(null),o=e=>G(e),[k,J]=l.useState(null),u=e=>J(e),[K,P]=l.useState(""),[Q,E]=l.useState(""),[Y,F]=l.useState(""),[_,L]=l.useState(""),[ee,z]=l.useState("");function se(e,a,le,ne,re){u("xl"),P(e),E(a),F(le),L(ne),z(re)}const te={headRow:{style:{border:"none"}},headCells:{style:{color:"#997400",fontSize:"14px"}},rows:{highlightOnHoverStyle:{backgroundColor:"rgb(230, 244, 244)",borderBottomColor:"#FFFFFF",outline:"1px solid #FFFFFF"}},pagination:{style:{border:"none"}}},ae=[{name:"Village",selector:e=>e.village},{name:"Parish",selector:e=>e.parish.parish},{name:"Subcounty",selector:e=>e.parish.subcounty.subcounty},{name:"County",selector:e=>e.parish.subcounty.county.county},{name:"District",selector:e=>e.parish.subcounty.county.district.district},,{name:"Added On",selector:e=>new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},{selector:e=>s.jsx("button",{onClick:()=>se(e.village,e.parish.parish,e.parish.subcounty.subcounty,e.parish.subcounty.county.county,e.parish.subcounty.county.district.district,e.id),className:"bg-green-600 rounded-md p-1",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"white",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})})}];return s.jsxs("div",{children:[s.jsx(oe,{title:s.jsxs("div",{className:"flex flex-col md:flex-row space-x-0 md:space-x-5 space-y-5 md:space-y-0 whitespace-nowrap items-start md:items-center justify-between w-full border-b-2 border-primary pb-3 pt-2",children:[s.jsx("span",{children:"Villages"}),s.jsxs("div",{className:"flex space-x-3 items-center md:space-x-5 w-full md:w-1/2 md:justify-end print:hidden",children:[s.jsx(t.Input,{type:"text",label:"Search",value:d,onChange:T,className:"md:w-full"}),s.jsx("span",{children:s.jsxs(t.Button,{size:"sm",color:"success",type:"submit",className:"flex h-10 items-center",onClick:()=>o("xl"),children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"mr-2 w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add"]})})]})]}),columns:ae,data:i.data,customStyles:te,pointerOnHover:!0,onRowClicked:(e,a)=>!children&&ExpandableComponent?null:editRow(e,a),highlightOnHover:!0,pagination:!0,paginationServer:!0,paginationTotalRows:"",paginationPerPage:"",onChangePage:R,paginationRowsPerPageOptions:[]}),s.jsx(l.Fragment,{children:s.jsxs(t.Dialog,{open:N==="xl",size:N,handler:o,children:[s.jsx(t.DialogHeader,{children:s.jsx(t.Typography,{variant:"h5",color:"blue-gray",children:"Add a Subcounty"})}),s.jsxs("form",{onSubmit:q,children:[s.jsx(t.DialogBody,{divider:!0,className:"grid place-items-center gap-4",children:s.jsxs("div",{className:"space-y-4 w-full",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"District"}),s.jsx(c,{options:f,value:f.find(e=>e.value===n.district),onChange:e=>{r("district",(e==null?void 0:e.value)||""),e&&X(e.value)},placeholder:"Select district...",className:"text-sm"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"County"}),s.jsx(c,{options:C,value:C.find(e=>e.value===n.county),onChange:e=>{r("county",(e==null?void 0:e.value)||""),e&&U(e.value)},isDisabled:!n.district||g,placeholder:g?"Loading...":"Select county...",className:"text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subcounty"}),s.jsx(c,{options:w,value:w.find(e=>e.value===n.subcounty),onChange:e=>{r("subcounty",(e==null?void 0:e.value)||""),e&&Z(e.value)},isDisabled:!n.county||x,placeholder:x?"Loading...":"Select subcounty",className:"text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Parish"}),s.jsx(c,{options:D,value:D.find(e=>e.value===n.parish),onChange:e=>{r("parish",(e==null?void 0:e.value)||"")},isDisabled:!n.subcounty||y,placeholder:y?"Loading...":"Select parish",className:"text-sm"})]}),s.jsx(t.Input,{label:"Village",value:n.village??"",onChange:e=>r("village",e.target.value),size:"sm"})]})}),s.jsxs(t.DialogFooter,{className:"space-x-2",children:[s.jsx(t.Button,{onClick:o,variant:"gradient",color:"blue-gray",children:"Close"}),s.jsx(t.Button,{type:"submit",className:"bg-black",children:"Add"})]})]})]})}),s.jsx(l.Fragment,{children:s.jsxs(t.Dialog,{open:k==="xl",size:k,handler:u,children:[s.jsx(t.DialogHeader,{children:s.jsx(t.Typography,{variant:"h5",color:"blue-gray",children:"Edit Village"})}),s.jsxs("form",{children:[s.jsxs(t.DialogBody,{divider:!0,className:"grid place-items-center gap-4",children:[s.jsx(t.Input,{color:"deep-orange",label:"District",disabled:!0,value:ee,onChange:e=>z(e.target.value),size:"sm"}),s.jsx(t.Input,{color:"deep-orange",label:"County",disabled:!0,value:_,onChange:e=>L(e.target.value),size:"sm"}),s.jsx(t.Input,{color:"deep-orange",label:"Subcounty",disabled:!0,value:Y,onChange:e=>F(e.target.value),size:"sm"}),s.jsx(t.Input,{color:"deep-orange",label:"Parish",disabled:!0,value:Q,onChange:e=>E(e.target.value),size:"sm"}),s.jsx(t.Input,{color:"deep-orange",label:"Village",value:K,onChange:e=>P(e.target.value),size:"sm"})]}),s.jsx(t.DialogFooter,{children:s.jsxs("div",{className:"flex w-full justify-between",children:[s.jsx(t.Button,{variant:"gradient",color:"red",children:"Delete"}),s.jsxs("div",{className:"space-x-2",children:[s.jsx(t.Button,{onClick:u,variant:"gradient",color:"blue-gray",children:"Close"}),s.jsx(t.Button,{type:"submit",className:"bg-black",children:"Edit"})]})]})})]})]})})]})}ue.layout=i=>s.jsx(ce,{children:i});export{ue as default};
